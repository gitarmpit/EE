class EE_Calc{form_name="";constructor(t){this.form_name=t}init(){document.getElementById(this.form_name).onkeydown=t=>{13==t.keyCode?this.calc(t.target.id):27==t.keyCode&&this.clear()}}calc(t){}clear(){}}let currentFormId=null,deviceHeight=0,calc_array=[],ohmsLaw=null,vdiv=null,Xl=null,Xc=null,RC=null,LC=null,tf=null,fw=null,RLC=null,ind=null,dbm=null,ripple=null,headphone=null,sound=null,tl=null,bat=null,bat2=null,wres=null,vdrop=null,c555=null,wpar=null;function init_calcs(){ohmsLaw=new EE_Ohms_Law,calc_array.push(ohmsLaw),vdiv=new EE_Vdiv,calc_array.push(vdiv),Xl=new EE_Xl,calc_array.push(Xl),Xc=new EE_Xc,calc_array.push(Xc),RC=new EE_RC_Cutoff_Freq,calc_array.push(RC),LC=new EE_LC_LPF,calc_array.push(LC),tf=new EE_tf,calc_array.push(tf),fw=new EE_fw,calc_array.push(fw),RLC=new EE_RLC,calc_array.push(RLC),dbm=new EE_dbm,calc_array.push(dbm),ripple=new EE_ripple,calc_array.push(ripple),headphone=new EE_Headphone,calc_array.push(headphone),sound=new EE_Sound,calc_array.push(sound),tl=new EE_tl,calc_array.push(tl),bat=new EE_Battery,calc_array.push(bat),bat2=new EE_Battery2,calc_array.push(bat2),wres=new EE_WireRes,calc_array.push(wres),vdrop=new EE_Vdrop,calc_array.push(vdrop),c555=new EE_555,calc_array.push(c555),wpar=new EE_Wpar,calc_array.push(wpar),ind=new EE_IndCurrent,calc_array.push(ind)}function setLgHeight2(){var t,e;isNarrowScreen()&&null==currentFormId&&(t=document.getElementById("lg"),e=window.innerHeight-t.offsetTop-50,t.style.height=e+"px")}function setLgHeight(){var t=document.getElementById("lg"),e=window.innerHeight-t.offsetTop-20;t.style.height=e+"px",document.getElementById("list-container").style.height=window.innerHeight-20+"px",document.getElementById("right-container").style.height=window.innerHeight-20+"px"}function init(){currentFormId=null,setLgHeight(),window.addEventListener("resize",()=>{setLgHeight()}),deviceHeight=window.innerHeight,isNarrowScreen()&&(document.getElementById("label-tl-C").textContent="C per u.l.:",document.getElementById("label-tl-L").textContent="L per u.l.:",document.getElementById("label-tl-VF").textContent="VF, %:",document.getElementById("label-dbmw").textContent="Sens. dB/mW:",document.getElementById("label-dbv").textContent="Sens. dB/V:",window.visualViewport.addEventListener("resize",()=>{window.innerHeight==deviceHeight&&window.scrollTo(0,0)})),init_conversions(),init_calcs(),clear_all()}function clear_all(){calc_array.forEach(t=>t.clear())}function showForm(e,t){if(currentFormId=e,clear_all(),isNarrowScreen())document.getElementById("list-container").style.display="none",document.getElementById("form-container").style.display="block",document.getElementById("right-container").style.display="block",null==t&&(t=event.target.textContent),document.getElementById("form-title-p").textContent=t,window.scrollTo(0,0),document.body.style.overflow="hidden";else{document.getElementById("form-title-h3").textContent=event.target.textContent;let t=window.innerWidth-1100;200<(t=t<5?5:t)&&(t=200),document.getElementById(e).style.marginLeft=t+"px",document.getElementById(e).style.marginRight=t+"px"}document.querySelectorAll("form").forEach(function(t){t.id===e?t.style.display="grid":t.style.display="none"})}function goBack(){document.getElementById("list-container").style.display="block",document.getElementById("form-container").style.display="none",document.getElementById("right-container").style.display="none",document.body.style.overflow="",currentFormId=null}function getMaxWidth(){return getComputedStyle(document.documentElement).getPropertyValue("--max-width")}function isNarrowScreen(){return window.matchMedia("(max-width: 700px)").matches}function reportError(t){var e,s;isNarrowScreen()?null!=(e=document.getElementById("form-container"))&&(e.classList.add("error-shadow"),setTimeout(function(){e.classList.remove("error-shadow")},50)):null!=currentFormId&&null!=(s=document.getElementById(currentFormId))&&(s.classList.add("error-shadow"),setTimeout(function(){s.classList.remove("error-shadow")},100))}let GThr=0,MThr=0,kThr=0,baseThr=0,mThr=0,uThr=0,nThr=0,pThr=0,fThr=0,precision=3;function init_conversions(){GThr=set_threshold(1e12),MThr=set_threshold(1e9),kThr=set_threshold(1e6),baseThr=set_threshold(1e3),mThr=set_threshold(1),uThr=set_threshold(.001),nThr=set_threshold(1e-6),pThr=set_threshold(1e-9),fThr=set_threshold(1e-12)}function set_threshold(t){return t*(1-Math.pow(10,-(precision+1)))}function string_to_float(t,e){if((null==e||!1===e)&&"-"==t.charAt(0))throw"Error parsing "+t;e=t.match(/^[0-9e\-+.]+$/);if(null==e||1!=e.length)throw"Error parsing "+t;return Number.parseFloat(e[0])}function string_to_int(t){if("-"==t.charAt(0))throw"Error parsing "+t;var e=t.match(/^[0-9e]+$/);if(null==e||1!=e.length)throw"Error parsing "+t;return Number.parseInt(e[0])}function float_to_string(t,e){return null==e&&(e=precision),0==t?"0":1e-7<Math.abs(t)&&t<Math.abs(1e6)?.001<Math.abs(t)?strip_zeroes(t.toFixed(e)):strip_zeroes(t.toFixed(6)):t.toExponential(3)}function parse_value(t){if("-"==t.charAt(0))throw"Error parsing "+t;var e=(t=t.replace(/\s/g,"")).match(/^([0-9e\-+.]+)([A-Za-z]*)$/);if(null==e||3!=e.length)throw"Error parsing "+t;return[e[1],e[2]]}function strip_zeroes(t){return t.includes("e")?t:t.replace(/(-?\d*\.\d*?)0+$/,"$1").replace(/\.$/,"")}function str_to_L(t){var e=parse_value(t),s=e[0];let i=0;if("h"==e[1].toLowerCase()||""==e[1].toLowerCase()?i=1:"m"==e[1].toLowerCase()||"mh"==e[1].toLowerCase()?i=.001:"u"==e[1].toLowerCase()||"uh"==e[1].toLowerCase()?i=1e-6:"n"!=e[1].toLowerCase()&&"nh"!=e[1].toLowerCase()||(i=1e-9),0==i)throw"error parsing L: "+t;if(s*=i,isNaN(s)||!isFinite(s))throw"error parsing L: "+t;return s}function L_to_str(t){let e="H";if(0==t||!isFinite(t)||isNaN(t))throw"error parsing L: "+t;return t<pThr||t>baseThr?t.toExponential(precision)+"H":(t<nThr?(t*=1e9,e="nH"):t<uThr?(t*=1e6,e="uH"):t<mThr&&(t*=1e3,e="mH"),float_to_string(t,precision)+e)}function str_to_C(t){var e=parse_value(t),s=e[0];let i=0;if("f"==e[1].toLowerCase()||""==e[1].toLowerCase()?i=1:"m"==e[1].toLowerCase()||"mf"==e[1].toLowerCase()?i=.001:"u"==e[1].toLowerCase()||"uf"==e[1].toLowerCase()?i=1e-6:"n"==e[1].toLowerCase()||"nf"==e[1].toLowerCase()?i=1e-9:"p"!=e[1].toLowerCase()&&"pf"!=e[1].toLowerCase()||(i=1e-12),0==i)throw"error parsing C: "+t;if(s*=i,isNaN(s)||!isFinite(s))throw"error parsing C: "+t;return s}function C_to_str(t){let e="F";if(0==t||!isFinite(t)||isNaN(t))throw"error parsing C: "+t;return t<fThr||t>baseThr?t.toExponential(precision)+"F":(t<pThr?(t*=1e12,e="pF"):t<nThr?(t*=1e9,e="nF"):t<mThr&&(t*=1e6,e="uF"),float_to_string(t,precision)+e)}function str_to_freq(t){var e=parse_value(t),s=e[0];let i=0;if(""==e[1].toLowerCase()||"h"==e[1].toLowerCase()||"hz"==e[1].toLowerCase()?i=1:"k"==e[1].toLowerCase()||"kh"==e[1].toLowerCase()||"khz"==e[1].toLowerCase()?i=1e3:"m"==e[1].toLowerCase()||"mh"==e[1].toLowerCase()||"mhz"==e[1].toLowerCase()?i=1e6:"g"==e[1].toLowerCase()||"gh"==e[1].toLowerCase()||"ghz"==e[1].toLowerCase()?i=1e9:"t"!=e[1].toLowerCase()&&"th"!=e[1].toLowerCase()&&"thz"!=e[1].toLowerCase()||(i=1e12),0==i)throw"error parsing freq: "+t;if(s*=i,isNaN(s)||!isFinite(s))throw"error parsing f: "+t;return s}function freq_to_str(t){let e="Hz";if(0==t||!isFinite(t)||isNaN(t))throw"error parsing freq: "+t;return t<uThr||1e15<t?t.toExponential(precision)+"Hz":(e=t<baseThr?"Hz":t<kThr?(t/=1e3,"kHz"):t<MThr?(t/=1e6,"MHz"):t<GThr?(t/=1e9,"GHz"):(t/=1e12,"THz"),float_to_string(t,precision)+e)}function str_to_R(t){var e=parse_value(t),s=e[0];let i=0;if("r"==e[1].toLowerCase()||""==e[1]||"ohm"==e[1].toLowerCase()?i=1:"k"==e[1].toLowerCase()||"kohm"==e[1].toLowerCase()?i=1e3:"g"==e[1].toLowerCase()||"gohm"==e[1].toLowerCase()?i=1e9:"M"==e[1]||"Mohm"==e[1]||"MOhm"==e[1]||"meg"==e[1].toLowerCase()?i=1e6:"m"==e[1]||"mohm"==e[1]||"mOhm"==e[1]?i=.001:"u"==e[1].toLowerCase()||"uohm"==e[1].toLowerCase()?i=1e-6:"n"==e[1].toLowerCase()||"nohm"==e[1].toLowerCase()?i=1e-9:"p"!=e[1].toLowerCase()&&"pohm"!=e[1].toLowerCase()||(i=1e-12),0==i)throw"error parsing R: "+t;if(s*=i,isNaN(s)||!isFinite(s))throw"error parsing R: "+t;return s}function R_to_str(t){let e="";if(0==t||!isFinite(t)||isNaN(t))throw"error parsing R: "+t;return t>GThr||t<pThr?t.toExponential(precision)+"":(e=t<nThr?(t*=1e9,"n"):t<uThr?(t*=1e6,"u"):t<mThr?(t*=1e3,"m"):t<baseThr?"":t<kThr?(t/=1e3,"k"):t<MThr?(t/=1e6,"M"):(t/=1e9,"G"),float_to_string(t,precision)+e)}function str_to_t(t){var e=parse_value(t),s=e[0];let i=0;if("s"==e[1].toLowerCase()||""==e[1].toLowerCase()?i=1:"m"==e[1].toLowerCase()||"ms"==e[1].toLowerCase()?i=.001:"u"==e[1].toLowerCase()||"us"==e[1].toLowerCase()?i=1e-6:"n"==e[1].toLowerCase()||"ns"==e[1].toLowerCase()?i=1e-9:"p"!=e[1].toLowerCase()&&"ps"!=e[1].toLowerCase()||(i=1e-12),0==i)throw"error parsing t: "+t;if(s*=i,isNaN(s)||!isFinite(s))throw"error parsing t: "+t;return s}function t_to_str(t){let e="s";if(0==t||!isFinite(t)||isNaN(t))throw"error parsing t: "+t;return t<fThr||t>kThr?t.toExponential(precision)+"s":(t<pThr?(t*=1e12,e="ps"):t<nThr?(t*=1e9,e="ns"):t<uThr?(t*=1e6,e="us"):t<mThr&&(t*=1e3,e="ms"),float_to_string(t,precision)+e)}function str_to_V(t){var e=parse_value(t),s=e[0];let i=0;if("v"==e[1].toLowerCase()||""==e[1].toLowerCase()?i=1:"m"==e[1]||"mv"==e[1]||"mV"==e[1]?i=.001:"u"==e[1].toLowerCase()||"uv"==e[1].toLowerCase()?i=1e-6:"n"==e[1].toLowerCase()||"nv"==e[1].toLowerCase()?i=1e-9:"p"==e[1].toLowerCase()||"pv"==e[1].toLowerCase()?i=1e-12:"f"==e[1].toLowerCase()||"fv"==e[1].toLowerCase()?i=1e-15:"k"==e[1].toLowerCase()||"kv"==e[1].toLowerCase()?i=1e3:"M"!=e[1]&&"Mv"!=e[1]&&"MV"!=e[1]||(i=1e6),0==i)throw"error parsing V: "+t;if(s*=i,isNaN(s)||!isFinite(s))throw"error parsing V: "+t;return s}function V_to_str(t){let e="V";if(0==t||!isFinite(t)||isNaN(t))throw"error parsing V: "+t;return t<1e-15||t>MThr?t.toExponential(precision)+"V":(e=t<fThr?(t*=1e15,"fV"):t<pThr?(t*=1e12,"pV"):t<nThr?(t*=1e9,"nV"):t<uThr?(t*=1e6,"uV"):t<mThr?(t*=1e3,"mV"):t<baseThr?"V":t<1e6?(t/=1e3,"kV"):(t/=1e6,"MV"),float_to_string(t,precision)+e)}function str_to_I(t){var e=parse_value(t),s=e[0];let i=0;if("a"==e[1].toLowerCase()||""==e[1].toLowerCase()?i=1:"m"==e[1].toLowerCase()||"ma"==e[1].toLowerCase()?i=.001:"u"==e[1].toLowerCase()||"ua"==e[1].toLowerCase()?i=1e-6:"n"==e[1].toLowerCase()||"na"==e[1].toLowerCase()?i=1e-9:"p"==e[1].toLowerCase()||"pa"==e[1].toLowerCase()?i=1e-12:"f"==e[1].toLowerCase()||"fa"==e[1].toLowerCase()?i=1e-15:"k"!=e[1].toLowerCase()&&"ka"!=e[1].toLowerCase()||(i=1e3),0==i)throw"error parsing I: "+t;if(s*=i,isNaN(s)||!isFinite(s))throw"error parsing I: "+t;return s}function I_to_str(t){let e="A";if(0==t||!isFinite(t)||isNaN(t))throw"error parsing I: "+t;return t<1e-15||t>MThr?t.toExponential(precision)+"A":(e=t<fThr?(t*=1e15,"fA"):t<pThr?(t*=1e12,"pA"):t<nThr?(t*=1e9,"nA"):t<uThr?(t*=1e6,"uA"):t<mThr?(t*=1e3,"mA"):t<baseThr?"A":t<kThr?(t/=1e3,"kA"):(t/=1e6,"MA"),float_to_string(t,precision)+e)}function str_to_P(t){var e=parse_value(t),s=e[0];let i=0;if("w"==e[1].toLowerCase()||""==e[1].toLowerCase()?i=1:"m"==e[1]||"mw"==e[1]||"mW"==e[1]?i=.001:"u"==e[1].toLowerCase()||"uw"==e[1].toLowerCase()?i=1e-6:"n"==e[1].toLowerCase()||"nw"==e[1].toLowerCase()?i=1e-9:"p"==e[1].toLowerCase()||"pw"==e[1].toLowerCase()?i=1e-12:"k"==e[1].toLowerCase()||"kw"==e[1].toLowerCase()?i=1e3:"M"!=e[1]&&"MW"!=e[1]&&"Mw"!=e[1]||(i=1e6),0==i)throw"error parsing P: "+t;if(s*=i,isNaN(s)||!isFinite(s))throw"error parsing P: "+t;return s}function P_to_str(t){let e="W";if(0==t||!isFinite(t)||isNaN(t))throw"error parsing P: "+t;return t<fThr||t>MThr?t.toExponential(precision)+"W":(e=t<pThr?(t*=1e12,"pW"):t<nThr?(t*=1e9,"nW"):t<uThr?(t*=1e6,"uW"):t<mThr?(t*=1e3,"mW"):t<baseThr?"W":t<kThr?(t/=1e3,"kW"):(t/=1e6,"MW"),float_to_string(t,precision)+e)}function str_to_len(t){var e=parse_value(t);let s=e[0],i=0;if("m"==e[1].toLowerCase()||""==e[1].toLowerCase()?i=1:"in"==e[1].toLowerCase()?(i=1,s*=.0254):"ft"==e[1].toLowerCase()||"f"==e[1].toLowerCase()||"foot"==e[1].toLowerCase()||"feet"==e[1].toLowerCase()?(i=1,s*=.3048):"mi"==e[1].toLowerCase()||"mile"==e[1].toLowerCase()||"miles"==e[1].toLowerCase()||"mil"==e[1].toLowerCase()?(i=1,s*=1609.34):"cm"==e[1].toLowerCase()?i=.01:"mm"==e[1].toLowerCase()?i=.001:"u"==e[1].toLowerCase()||"um"==e[1].toLowerCase()?i=1e-6:"n"==e[1].toLowerCase()||"nm"==e[1].toLowerCase()?i=1e-9:"k"!=e[1].toLowerCase()&&"km"!=e[1].toLowerCase()||(i=1e3),0==i)throw"error parsing length: "+t;if(s*=i,isNaN(s)||!isFinite(s))throw"error parsing length: "+t;return s}function len_to_str(t){let e="m";if(0==t||!isFinite(t)||isNaN(t))throw"error parsing len: "+t;return t<1e-9||1e9<t?t.toExponential(precision)+"m":(t<1e-6?(t*=1e9,e="nm"):t<.001?(t*=1e6,e="um"):t<.01?(t*=1e3,e="mm"):t<1?(t*=100,e="cm"):t<1e3?e="m":(e="km",t/=1e3),float_to_string(t,precision)+e)}const SECONDS_IN_A_MINUTE=60,SECONDS_IN_AN_HOUR=60*SECONDS_IN_A_MINUTE,SECONDS_IN_A_DAY=24*SECONDS_IN_AN_HOUR,SECONDS_IN_A_MONTH=30*SECONDS_IN_A_DAY,SECONDS_IN_A_YEAR=365*SECONDS_IN_A_DAY;function YMDH_to_Seconds(t,e,s,i){return t*SECONDS_IN_A_YEAR+e*SECONDS_IN_A_MONTH+s*SECONDS_IN_A_DAY+i*SECONDS_IN_AN_HOUR}function seconds_to_YMDH(t){var e=Math.floor(t/SECONDS_IN_A_YEAR),s=(t%=SECONDS_IN_A_YEAR,Math.floor(t/SECONDS_IN_A_MONTH)),i=(t%=SECONDS_IN_A_MONTH,Math.floor(t/SECONDS_IN_A_DAY)),t=(t%=SECONDS_IN_A_DAY,Math.floor(t/SECONDS_IN_AN_HOUR));return[e,s,i,t]}function seconds_to_HM(t){var e=Math.floor(t/SECONDS_IN_AN_HOUR),t=t%SECONDS_IN_AN_HOUR;return[e,Math.floor(t/SECONDS_IN_A_MINUTE)]}function HM_to_Seconds(t,e){return t*SECONDS_IN_AN_HOUR+e*SECONDS_IN_A_MINUTE}class EE_Calc_Field{elementId="";_precision=null;constructor(t,e){this.elementId=t,null!=e&&(this._precision=e)}clear(){this.getElementById().value=""}empty(){return""===this.getElementById().value}getStringValue(){return this.getElementById().value}setStringValue(t){this.getElementById().value=t}setValue(t){this.getElementById().value=this._toString(t)}getValue(){return this.empty()?0:this._toValue(this.getElementById().value)}getElementById(){return document.getElementById(this.elementId)}_toString(t){return null}_toValue(t){return null}}class EE_Calc_Int extends EE_Calc_Field{_toString(t){return t.toString()}_toValue(t){return string_to_int(t)}}class EE_Calc_Float extends EE_Calc_Field{negativeAllowed=!1;constructor(t,e,s){super(t,e),this.negativeAllowed=s=null==s?!1:s}_toString(t){return float_to_string(t,this._precision)}_toValue(t){return string_to_float(t,this.negativeAllowed)}}class EE_Calc_V extends EE_Calc_Field{_toString(t){return V_to_str(t)}_toValue(t){return str_to_V(t)}}class EE_Calc_I extends EE_Calc_Field{_toString(t){return I_to_str(t)}_toValue(t){return str_to_I(t)}}class EE_Calc_R extends EE_Calc_Field{_toString(t){return R_to_str(t)}_toValue(t){return str_to_R(t)}}class EE_Calc_P extends EE_Calc_Field{_toString(t){return P_to_str(t)}_toValue(t){return str_to_P(t)}}class EE_Calc_C extends EE_Calc_Field{_toString(t){return C_to_str(t)}_toValue(t){return str_to_C(t)}}class EE_Calc_L extends EE_Calc_Field{_toString(t){return L_to_str(t)}_toValue(t){return str_to_L(t)}}class EE_Calc_Freq extends EE_Calc_Field{_toString(t){return freq_to_str(t)}_toValue(t){return str_to_freq(t)}}class EE_Calc_Time extends EE_Calc_Field{_toString(t){return t_to_str(t)}_toValue(t){return str_to_t(t)}}class EE_Calc_Len extends EE_Calc_Field{_toString(t){return len_to_str(t)}_toValue(t){return str_to_len(t)}}const E6=[1,1.5,2.2,3.3,4.7,6.8],E12=[1,1.2,1.5,1.8,2.2,2.7,3.3,3.9,4.7,5.6,6.8,8.2],E24=[1,1.1,1.2,1.3,1.5,1.6,1.8,2,2.2,2.4,2.7,3,3.3,3.6,3.9,4.3,4.7,5.1,5.6,6.2,6.8,7.5,8.2,9.1,10];let E_array=[],l2=Math.log(2);function round_off_c(t){return Math.pow(10,Math.ceil(+Math.log10(t)))}function getEValue(t,e){null==e&&(e=E_array);var s=Math.pow(10,Math.floor(Math.log10(t))),i=t/s;let l=e[0],h=Math.abs(i-e[0]);for(let t=1;t<e.length;t++){var a=Math.abs(i-e[t]);a<h&&(l=e[t],h=a)}return l*s}class EE_555 extends EE_Calc{R1_field=null;R2_field=null;C_field=null;dc_field=null;th_field=null;tl_field=null;f_field=null;R1=0;R2=0;C=0;dc=0;th=0;tl=0;f=0;min_DC=50.05;constructor(){super("form-555"),this.R1_field=new EE_Calc_R(this.form_name+"-R1"),this.R2_field=new EE_Calc_R(this.form_name+"-R2"),this.C_field=new EE_Calc_C(this.form_name+"-C"),this.dc_field=new EE_Calc_Float(this.form_name+"-dc"),this.th_field=new EE_Calc_Time(this.form_name+"-th"),this.tl_field=new EE_Calc_Time(this.form_name+"-tl"),this.f_field=new EE_Calc_Freq(this.form_name+"-f"),this.init();let t=document.getElementById(this.form_name+"-dc");t.onblur=()=>{this.process_555_dc()},(t=document.getElementById(this.form_name+"-f")).onblur=()=>{this.process_555_f()},(t=document.getElementById(this.form_name+"-th")).onblur=()=>{this.process_555_th()},(t=document.getElementById(this.form_name+"-tl")).onblur=()=>{this.process_555_tl()},document.querySelectorAll('input[name="e"]').forEach(t=>{t.addEventListener("change",t=>{t=t.target.id;E_array="e-e6"==t?E6:"e-e12"==t?E12:"e-e24"==t?E24:[]})}),document.querySelectorAll('input[name="e"]').forEach(t=>{"e-exact"===t.id&&(t.checked=!0)})}clear(){this.R1_field.clear(),this.R2_field.clear(),this.C_field.clear(),this.dc_field.clear(),this.th_field.clear(),this.tl_field.clear(),this.f_field.clear(),this.clear_tmp()}clear_tmp(){this.R1=0,this.R2=0,this.C=0,this.dc=0,this.th=0,this.tl=0,this.f=0}process_555_f(){this.clear_tmp();try{this.f_field.empty()||(this.f=this.f_field.getValue(),this.dc_field.empty()?(this.dc=50.5,this.dc_field.setValue(this.dc)):this.dc=this.dc_field.getValue()),this.th_field.empty()||(this.th=this.th_field.getValue()),this.tl_field.empty()||(this.tl=this.tl_field.getValue())}catch{this.f_field.clear(),this.f=0}var t;0<this.f?(t=1/this.f,this.th=t*this.dc/100,this.tl=t-this.th,this.th_field.setValue(this.th),this.tl_field.setValue(this.tl)):0<this.th&&0<this.tl&&(this.f=1/(this.th+this.tl),this.f_field.setValue(this.f))}process_555_dc(){this.clear_tmp();try{this.dc_field.empty()||(this.dc=this.dc_field.getValue(),this.dc<this.min_DC?(this.dc=this.min_DC,this.dc_field.setValue(this.dc)):99<this.dc&&(this.dc=99,this.dc_field.setValue(this.dc))),this.th_field.empty()||(this.th=this.th_field.getValue()),this.tl_field.empty()||(this.tl=this.tl_field.getValue())}catch{this.dc=0,this.dc_field.clear()}var t;0<this.dc?0<this.th&&0==this.tl?this.set_tl_f_from_dc_th():0==this.th&&0<this.tl?this.set_th_f_from_dc_tl():0<this.th&&0<this.tl&&(t=this.th+this.tl,this.th=t*this.dc/100,this.tl=t-this.th,this.th_field.setValue(this.th),this.tl_field.setValue(this.tl),this.f=1/(this.th+this.tl),this.f_field.setValue(this.f)):0<this.th&&0<this.tl&&(this.dc=this.th/(this.th+this.tl)*100,this.dc_field.setValue(this.dc))}set_tl_f_from_dc_th(){var t=100*this.th/this.dc;this.tl=t-this.th,this.tl_field.setValue(this.tl),this.f=1/t,this.f_field.setValue(this.f)}set_th_f_from_dc_tl(){var t=100*this.tl/(100-this.dc);this.th=t-this.tl,this.th_field.setValue(this.th),this.f=1/t,this.f_field.setValue(this.f)}set_f_dc_from_th_tl(){this.f=1/(this.th+this.tl),this.f_field.setValue(this.f),this.dc=this.th/(this.th+this.tl)*100,this.dc_field.setValue(this.dc)}process_555_th(){this.clear_tmp();try{this.th_field.empty()||(this.th=this.th_field.getValue()),this.tl_field.empty()||(this.tl=this.tl_field.getValue()),this.dc_field.empty()||(this.dc=this.dc_field.getValue()),this.f_field.empty()||(this.f=this.f_field.getValue())}catch{this.th=0,this.th_field.clear()}var t;0<this.th&&0<this.tl?(this.tl>=this.th&&(this.th=1.0205*this.tl,this.th_field.setValue(this.th)),this.set_f_dc_from_th_tl()):0<this.th&&0==this.tl&&0<this.dc?this.set_tl_f_from_dc_th():0==this.th&&0<this.tl&&0<this.f&&(t=1/this.f,this.th=t-this.tl,this.th_field.setValue(this.th))}process_555_tl(){this.clear_tmp();try{this.th_field.empty()||(this.th=this.th_field.getValue()),this.tl_field.empty()||(this.tl=this.tl_field.getValue()),this.dc_field.empty()||(this.dc=this.dc_field.getValue()),this.f_field.empty()||(this.f=this.f_field.getValue())}catch{this.tl=0,this.tl_field.clear()}var t;0<this.th&&0<this.tl?(this.th<=this.tl&&(this.tl=.98*this.th,this.tl_field.setValue(this.tl)),this.set_f_dc_from_th_tl()):0==this.th&&0<this.tl&&0<this.dc?this.set_th_f_from_dc_tl():0<this.th&&0==this.tl&&0<this.f?(t=1/this.f,this.tl=t-this.th,this.tl_field.setValue(this.tl)):0==this.tl&&0==this.f&&0<this.th&&0<this.dc&&this.set_tl_f_from_dc_th()}calc_555_timing(){this.th=l2*(this.R1+this.R2)*this.C,this.tl=l2*this.R2*this.C,this.dc=this.th/(this.th+this.tl)*100,this.f=1/(this.th+this.tl),this.f_field.setValue(this.f),this.th_field.setValue(this.th),this.tl_field.setValue(this.tl),this.dc_field.setValue(this.dc)}calc_R1_R2(){var t=this.tl/l2,e=this.th/l2-t;0==this.C&&(this.C=1e-5/this.f/1.5,this.C<1e-10)&&(this.C=1e-10),this.R1=e/this.C,this.R2=t/this.C}calc(t){let e=0,s=!1;this.clear_tmp();try{if(t==this.form_name+"-th"?this.process_555_th():t==this.form_name+"-tl"?this.process_555_tl():t==this.form_name+"-dc"?this.process_555_dc():t==this.form_name+"-f"&&this.process_555_f(),this.R1_field.empty()||(this.R1=this.R1_field.getValue()),this.R2_field.empty()||(this.R2=this.R2_field.getValue()),this.C_field.empty()||(this.C=this.C_field.getValue()),this.dc_field.empty()||(this.dc=this.dc_field.getValue(),this.dc<50&&(this.dc=50,this.dc_field.setValue(this.dc)),99<this.dc&&(this.dc=99,this.dc_field.setValue(this.dc)),++e),this.th_field.empty()||(this.th=this.th_field.getValue(),++e),this.tl_field.empty()||(this.tl=this.tl_field.getValue(),++e),this.f_field.empty()||(this.f=this.f_field.getValue(),++e),4==e&&(s=!0),t!=this.form_name+"-R1"&&t!=this.form_name+"-R1"&&t!=this.form_name+"-C"||0==this.R1||0==this.R2||0==this.C||(s=!1),0==this.R1||0==this.R2||0==this.C||s)if(s&&0==this.R1&&0==this.R2){var i;this.calc_R1_R2(),E_array.length&&(this.R1=getEValue(this.R1),this.R2=getEValue(this.R2),i=this.tl/l2,this.C=i/this.R2,this.C=getEValue(this.C)),this.calc_555_timing(),this.R1_field.setValue(this.R1),this.R2_field.setValue(this.R2),this.C_field.setValue(this.C)}else if(s&&0!=this.C&&0!=this.R1&&0==this.R2)E_array.length&&(this.R1=getEValue(this.R1),this.C=getEValue(this.C),this.R1_field.setValue(this.R1),this.C_field.setValue(this.C)),this.R2=this.tl/l2/this.C,E_array.length&&(this.R2=getEValue(this.R2)),this.calc_555_timing(),this.R2_field.setValue(this.R2);else if(s&&0!=this.C&&0==this.R1&&0!=this.R2){E_array.length&&(this.R2=getEValue(this.R2),this.R2_field.setValue(this.R2),this.C=getEValue(this.C),this.C_field.setValue(this.C)),this.tl=l2*this.R2*this.C;var l=100*this.tl/(100-this.dc);if(this.th=l-this.tl,this.th<=this.tl)throw"th <= tl";this.R1=this.th/l2/this.C-this.R2,E_array.length&&(this.R1=getEValue(this.R1)),this.calc_555_timing(),this.R1_field.setValue(this.R1)}else{if(!s||0!=this.C||0==this.R1||0==this.R2)throw"invalid parameters";E_array.length&&(this.R1=getEValue(this.R1),this.R1_field.setValue(this.R1),this.R2=getEValue(this.R2),this.R2_field.setValue(this.R2));var h=this.tl/l2;this.C=h/this.R2,E_array.length&&(this.C=getEValue(this.C)),this.calc_555_timing(),this.C_field.setValue(this.C)}else this.calc_555_timing()}catch(t){reportError(t)}}}class EE_Battery extends EE_Calc{mAh=null;I=null;y=null;m=null;d=null;h=null;constructor(){super("form-battery"),this.mAh=new EE_Calc_Float(this.form_name+"-mAh"),this.I=new EE_Calc_I(this.form_name+"-I"),this.y=new EE_Calc_Int(this.form_name+"-y"),this.m=new EE_Calc_Int(this.form_name+"-m"),this.d=new EE_Calc_Int(this.form_name+"-d"),this.h=new EE_Calc_Int(this.form_name+"-h"),this.init()}clear(){this.mAh.clear(),this.I.clear(),this.y.clear(),this.m.clear(),this.d.clear(),this.h.clear()}calc(t){let e=0,s=0,i=0,l=0,h=0,a=0,r=!1;try{if(!this.mAh.empty()&&(e=this.mAh.getValue())<=0)throw"invalid value";if(this.I.empty()||(s=this.I.getValue()),this.y.empty()||(i=this.y.getValue(),r=!0),this.m.empty()||(l=this.m.getValue(),r=!0),this.d.empty()||(h=this.d.getValue(),r=!0),this.h.empty()||(a=this.h.getValue(),r=!0),0<e&&0<s&&!r){var _=seconds_to_YMDH(3.6*e/s);this.y.setValue(_[0]),this.m.setValue(_[1]),this.d.setValue(_[2]),this.h.setValue(_[3])}else if(0<e&&0==s&&r){var n=3.6*e,o=YMDH_to_Seconds(i,l,h,a);s=n/o,this.I.setValue(s)}else{if(0!=e||0==s||!r)throw"invalid parameters";var u=YMDH_to_Seconds(i,l,h,a),c=s*u;e=c/3.6,this.mAh.setValue(e)}}catch(t){reportError(t)}}}class EE_Battery2 extends EE_Calc{Ah=null;I=null;V=null;P=null;h=null;min=null;constructor(){super("form-battery2"),this.Ah=new EE_Calc_Float(this.form_name+"-Ah"),this.I=new EE_Calc_I(this.form_name+"-I"),this.V=new EE_Calc_V(this.form_name+"-V"),this.P=new EE_Calc_P(this.form_name+"-P"),this.h=new EE_Calc_Int(this.form_name+"-h"),this.min=new EE_Calc_Int(this.form_name+"-min"),this.init()}clear(){this.Ah.clear(),this.I.clear(),this.V.clear(),this.P.clear(),this.h.clear(),this.min.clear()}calc(t){let e=0,s=0,i=0,l=0,h=0,a=0,r=!1;try{if(!this.Ah.empty()&&(e=this.Ah.getValue())<=0)throw"invalid value";if(this.I.empty()||(s=this.I.getValue()),this.V.empty()||(i=this.V.getValue()),this.P.empty()||(l=this.P.getValue()),this.h.empty()||(h=this.h.getValue(),r=!0),this.min.empty()||(a=this.min.getValue(),r=!0),0<i&&0<s?(l=i*s,this.P.setValue(l)):0<i&&0<l?(s=l/i,this.I.setValue(s)):0<s&&0<l&&(i=l/s,this.V.setValue(i)),0<e&&0<s&&!r){var _=seconds_to_HM(3600*e/s);this.h.setValue(_[0]),this.min.setValue(_[1])}else if(0<e&&0==s&&r){var n=3600*e,o=HM_to_Seconds(h,a);s=n/o,this.I.setValue(s),0<l?(i=l/s,this.V.setValue(i)):0<i&&(l=i*s,this.P.setValue(l))}else{if(0!=e||0==s||!r)throw"invalid parameters";var u=HM_to_Seconds(h,a),c=s*u;e=c/3600,this.Ah.setValue(e)}}catch(t){reportError(t)}}}class EE_dbm extends EE_Calc{P=null;dbm=null;Vrms=null;Vpk=null;Vpp=null;constructor(){super("form-dbm"),this.P=new EE_Calc_P(this.form_name+"-P"),this.dbm=new EE_Calc_Float(this.form_name+"-dbm"),this.Vrms=new EE_Calc_V(this.form_name+"-Vrms"),this.Vpk=new EE_Calc_V(this.form_name+"-Vpk"),this.Vpp=new EE_Calc_V(this.form_name+"-Vpp"),this.init()}clear(){this.P.clear(),this.dbm.clear(),this.Vrms.clear(),this.Vpk.clear(),this.Vpp.clear()}calc(t){let e=0,s=0,i=0,l=0,h=0,a=0;try{if(this.P.empty()||(h=this.P.getValue(),++e),this.dbm.empty()||(a=this.dbm.getValue(),++e),this.Vrms.empty()||(s=this.Vrms.getValue(),++e),this.Vpk.empty()||(i=this.Vpk.getValue(),++e),this.Vpp.empty()||(l=this.Vpp.getValue(),++e),t==this.form_name+"-P"&&0!=h?(a=s=i=l=0,e=1):t==this.form_name+"-dbm"&&0!=a?(h=s=i=l=0,e=1):t==this.form_name+"-Vrms"&&0!=s?(a=h=i=l=0,e=1):t==this.form_name+"-Vpk"&&0!=i?(a=h=s=l=0,e=1):t==this.form_name+"-Vpp"&&0!=l&&(a=h=s=i=0,e=1),1!=e)throw"invalid number of parameters";if(0<h)a=10*Math.log10(1e3*h),this.dbm.setValue(a),s=Math.sqrt(50*h),this.Vrms.setValue(s),i=s*Math.sqrt(2),this.Vpk.setValue(i),l=2*i,this.Vpp.setValue(l);else if(0!=a)h=.001*Math.pow(10,a/10),this.P.setValue(h),s=Math.sqrt(50*h),this.Vrms.setValue(s),i=s*Math.sqrt(2),this.Vpk.setValue(i),l=2*i,this.Vpp.setValue(l);else if(0<s)h=s*s/50,this.P.setValue(h),a=10*Math.log10(1e3*h),this.dbm.setValue(a),i=s*Math.sqrt(2),this.Vpk.setValue(i),l=2*i,this.Vpp.setValue(l);else if(0<i)s=i/Math.sqrt(2),this.Vrms.setValue(s),h=s*s/50,this.P.setValue(h),a=10*Math.log10(1e3*h),this.dbm.setValue(a),l=2*i,this.Vpp.setValue(l);else{if(!(0<l))throw"invalid input";i=l/2,this.Vpk.setValue(i),s=i/Math.sqrt(2),this.Vrms.setValue(s),h=s*s/50,this.P.setValue(h),a=10*Math.log10(1e3*h),this.dbm.setValue(a)}}catch(t){reportError(t)}}}class EE_fw extends EE_Calc{l=null;freq=null;c=3e8;constructor(){super("form-fw"),this.l=new EE_Calc_Len(this.form_name+"-wl"),this.freq=new EE_Calc_Freq(this.form_name+"-f"),this.init()}clear(){this.freq.clear(),this.l.clear()}calc(s){try{let t=0,e=0;if(this.freq.empty()||(t=this.freq.getValue()),this.l.empty()||(e=this.l.getValue()),s==this.form_name+"-wl"&&0!=e?t=0:s==this.form_name+"-f"&&0!=t&&(e=0),0!=t&&0==e)e=this.c/t,this.l.setValue(e);else{if(0!=t||0==e)throw"invalid input";1<=(t=this.c/e)&&this.freq.setValue(t)}}catch(t){reportError(t)}}}class EE_Headphone extends EE_Calc{V=null;R=null;I=null;P=null;dbmw=null;dbv=null;L_db=null;constructor(){super("form-headphone"),this.V=new EE_Calc_V(this.form_name+"-V"),this.R=new EE_Calc_R(this.form_name+"-R"),this.I=new EE_Calc_I(this.form_name+"-I"),this.P=new EE_Calc_P(this.form_name+"-P"),this.dbmw=new EE_Calc_Float(this.form_name+"-sensitivity-dbmw"),this.dbv=new EE_Calc_Float(this.form_name+"-sensitivity-dbv"),this.L_db=new EE_Calc_Float(this.form_name+"-loudness"),this.init()}clear(){this.V.clear(),this.R.clear(),this.I.clear(),this.P.clear(),this.dbmw.clear(),this.dbv.clear(),this.L_db.clear()}calc(t){let e=0,s=0,i=0,l=0,h=0,a=0,r=0,_=0;try{if(this.dbmw.empty()||(e=this.dbmw.getValue()),this.dbv.empty()||(s=this.dbv.getValue()),this.I.empty()||(l=this.I.getValue(),++_),this.V.empty()||(h=this.V.getValue(),++_),this.P.empty()||(a=this.P.getValue(),++_),this.R.empty()||(i=this.R.getValue(),++_),this.L_db.empty()||(r=this.L_db.getValue()),0!=e&&0!=i?(s=e-10*Math.log10(i/1e3),this.dbv.setValue(s)):0!=s&&0!=i&&(e=s+10*Math.log10(i/1e3),this.dbmw.setValue(e)),0!=r&&0==a&&0!=e&&0!=i&&(a=Math.pow(10,(r-e)/10)/1e3,this.P.setValue(a),++_),2!=_)throw"invalid number of parameters";if(0!=h&&0!=i)l=h/i,this.I.setValue(l),a=l*h,this.P.setValue(a);else if(0!=h&&0!=l)i=h/l,this.R.setValue(i),a=h*l,this.P.setValue(a);else if(0!=l&&0!=i)h=l*i,this.V.setValue(h),a=h*l,this.P.setValue(a);else if(0!=a&&0!=i)h=Math.sqrt(a*i),this.V.setValue(h),l=h/i,this.I.setValue(l);else if(0!=a&&0!=l)h=a/l,this.V.setValue(h),i=h/l,this.R.setValue(i);else{if(0==a||0==h)throw"invalid parameters";i=h*h/a,this.R.setValue(i),l=h/i,this.I.setValue(l)}0==r&&0!=a&&0!=e?(r=e+10*Math.log10(1e3*a),this.L_db.setValue(r)):0!=a&&0==e&&0==s&&0!=r&&(e=r-10*Math.log10(1e3*a),this.dbmw.setValue(e),s=e-10*Math.log10(i/1e3),this.dbv.setValue(s))}catch(t){reportError(t)}}}class EE_IndCurrent extends EE_Calc{L=null;V=null;I=null;R=null;t=null;constructor(){super("form-ind"),this.L=new EE_Calc_L(this.form_name+"-L"),this.V=new EE_Calc_V(this.form_name+"-V"),this.I=new EE_Calc_I(this.form_name+"-I"),this.R=new EE_Calc_R(this.form_name+"-R"),this.t=new EE_Calc_Time(this.form_name+"-t"),this.init()}clear(){this.L.clear(),this.V.clear(),this.I.clear(),this.R.clear(),this.t.clear()}calc(t){try{if(!this.L.empty()||this.V.empty()||this.I.empty()||this.t.empty())if(this.L.empty()||!this.V.empty()||this.I.empty()||this.t.empty())if(this.L.empty()||this.V.empty()||!this.I.empty()||this.t.empty()){if(this.L.empty()||this.V.empty()||this.I.empty()||!this.t.empty())throw"invalid input";this.R.empty()?this.t.setValue(this.I.getValue()*this.L.getValue()/this.V.getValue()):this.t.setValue(-this.L.getValue()*Math.log(-(this.I.getValue()*this.R.getValue()-this.V.getValue())/this.V.getValue())/this.R.getValue())}else this.R.empty()?this.I.setValue(this.V.getValue()*this.t.getValue()/this.L.getValue()):this.I.setValue(this.V.getValue()/this.R.getValue()*(1-Math.exp(-this.R.getValue()*this.t.getValue()/this.L.getValue())));else{var e;this.R.empty()?this.V.setValue(this.L.getValue()*this.I.getValue()/this.t.getValue()):(e=Math.exp(this.R.getValue()*this.t.getValue()/this.L.getValue()),this.V.setValue(this.I.getValue()*this.R.getValue()*e/(e-1)))}else this.R.empty()?this.L.setValue(this.V.getValue()*this.t.getValue()/this.I.getValue()):this.L.setValue(-this.R.getValue()*this.t.getValue()/Math.log(-(this.I.getValue()*this.R.getValue()-this.V.getValue())/this.V.getValue()))}catch(t){reportError(t)}}}class EE_LC_LPF extends EE_Calc{C=null;freq=null;L=null;constructor(){super("form-LC"),this.C=new EE_Calc_C(this.form_name+"-C"),this.freq=new EE_Calc_Freq(this.form_name+"-freq"),this.L=new EE_Calc_L(this.form_name+"-L"),this.init()}clear(){this.C.clear(),this.freq.clear(),this.L.clear()}calc(t){try{if(this.freq.empty()||this.C.empty()||!this.L.empty())if(this.freq.empty()||!this.C.empty()||this.L.empty()){if(!this.freq.empty()||this.C.empty()||this.L.empty())throw"invalid input";this.freq.setValue(1/(2*Math.PI*Math.sqrt(this.L.getValue()*this.C.getValue()))),this.calc_freq_from_t()}else this.C.setValue(1/(this.L.getValue()*Math.pow(2*Math.PI*this.freq.getValue(),2)));else this.L.setValue(1/(this.C.getValue()*Math.pow(2*Math.PI*this.freq.getValue(),2)))}catch(t){reportError(t)}}}class EE_Ohms_Law extends EE_Calc{V_field=null;R_field=null;I_field=null;P_field=null;constructor(){super("form-ohm"),this.V_field=new EE_Calc_V(this.form_name+"-V"),this.R_field=new EE_Calc_R(this.form_name+"-R"),this.I_field=new EE_Calc_I(this.form_name+"-I"),this.P_field=new EE_Calc_P(this.form_name+"-P"),this.init()}clear(){this.V_field.clear(),this.R_field.clear(),this.I_field.clear(),this.P_field.clear()}calc(t){try{let t=0,e=0,s=0,i=0,l=0;if(this.V_field.empty()||(t=this.V_field.getValue(),++l),this.R_field.empty()||(e=this.R_field.getValue(),++l),this.I_field.empty()||(s=this.I_field.getValue(),++l),this.P_field.empty()||(i=this.P_field.getValue(),++l),2!=l)throw"wrong number of input fields";if(0!=t&&0!=e)s=t/e,i=s*t,this.I_field.setValue(s),this.P_field.setValue(i);else if(0!=t&&0!=s)e=t/s,i=t*s,this.R_field.setValue(e),this.P_field.setValue(i);else if(0!=s&&0!=e)t=s*e,i=t*s,this.V_field.setValue(t),this.P_field.setValue(i);else if(0!=i&&0!=e)t=Math.sqrt(i*e),s=t/e,this.V_field.setValue(t),this.I_field.setValue(s);else if(0!=i&&0!=s)t=i/s,e=t/s,this.V_field.setValue(t),this.R_field.setValue(e);else{if(0==i||0==t)throw"unexpected";e=t*t/i,s=t/e,this.R_field.setValue(e),this.I_field.setValue(s)}}catch(t){reportError(t)}}}class EE_RC_Cutoff_Freq extends EE_Calc{C=null;freq=null;R=null;t=null;constructor(){super("form-RC"),this.C=new EE_Calc_C(this.form_name+"-C"),this.freq=new EE_Calc_Freq(this.form_name+"-freq"),this.R=new EE_Calc_R(this.form_name+"-R"),this.t=new EE_Calc_Time(this.form_name+"-t"),this.init();let t=document.getElementById(this.form_name+"-freq");t.onblur=()=>{this.process_blur_freq()},(t=document.getElementById(this.form_name+"-t")).onblur=()=>{this.process_blur_t()}}clear(){this.C.clear(),this.freq.clear(),this.R.clear(),this.t.clear()}process_blur_freq(){this.freq.empty()?this.t.clear():(this.freq.getValue(),this.calc_t_from_freq())}process_blur_t(){this.t.empty()?this.freq.clear():this.calc_freq_from_t()}calc_t_from_freq(){this.t.setValue(1/(2*Math.PI*this.freq.getValue()))}calc_freq_from_t(){this.freq.setValue(1/(2*Math.PI*this.t.getValue()))}calc(t){try{let t=!1;if(!this.t.empty()&&this.freq.empty()&&this.calc_freq_from_t(),this.t.empty()&&!this.freq.empty()&&this.calc_t_from_freq(),(t=this.t.empty()||this.freq.empty()?t:!0)&&!this.C.empty()&&this.R.empty())this.R.setValue(1/(2*Math.PI*this.freq.getValue()*this.C.getValue()));else if(t&&this.C.empty()&&!this.R.empty())this.C.setValue(1/(2*Math.PI*this.freq.getValue()*this.R.getValue()));else{if(t||this.C.empty()||this.R.empty())throw"invalid input";this.t.setValue(this.R.getValue()*this.C.getValue()),this.calc_freq_from_t()}}catch(t){reportError(t)}}}class EE_ripple extends EE_Calc{f=null;C=null;I=null;V=null;constructor(){super("form-ripple"),this.f=new EE_Calc_Freq(this.form_name+"-f"),this.C=new EE_Calc_C(this.form_name+"-C"),this.I=new EE_Calc_I(this.form_name+"-I"),this.V=new EE_Calc_V(this.form_name+"-V"),this.init()}clear(){this.f.clear(),this.C.clear(),this.I.clear(),this.V.clear()}calc(t){let e=0,s=0,i=0,l=0,h=0;try{if(this.f.empty()||(s=this.f.getValue(),++e),this.C.empty()||(i=this.C.getValue(),++e),this.I.empty()||(l=this.I.getValue(),++e),this.V.empty()||(h=this.V.getValue(),++e),3!=e)throw"invalid number of parameters";if(0==h)h=l/(4*s*i),this.V.setValue(h);else if(0==l)l=4*h*s*i,this.I.setValue(l);else if(0==i)i=l/(4*s*h),this.C.setValue(i);else{if(0!=s)throw"invalid parameters";s=l/(4*i*h),this.f.setValue(s)}}catch(t){reportError(t)}}}class EE_RLC extends EE_Calc{R=null;L=null;C=null;f=null;Qs=null;Qp=null;constructor(){super("form-RLC"),this.R=new EE_Calc_R(this.form_name+"-R"),this.L=new EE_Calc_L(this.form_name+"-L"),this.C=new EE_Calc_C(this.form_name+"-C"),this.f=new EE_Calc_Freq(this.form_name+"-freq"),this.Qs=new EE_Calc_Float(this.form_name+"-Qs"),this.Qp=new EE_Calc_Float(this.form_name+"-Qp"),this.init()}clear(){this.R.clear(),this.L.clear(),this.C.clear(),this.f.clear(),this.Qs.clear(),this.Qp.clear()}calc_Qs(t,e,s){s=2*Math.PI*s*t/e;this.Qs.setValue(s)}calc_Qp(t,e,s){e/=2*Math.PI*s*t;this.Qp.setValue(e)}calc_Q(t,e,s,i,l){var h;1e-15<t&&1e-15<s&&(0<e&&0==i&&0==l?(this.calc_Qs(t,e,s),this.calc_Qp(t,e,s)):0<i&&0==e&&0==l?(h=2*Math.PI*s*t/i,this.R.setValue(h),this.calc_Qp(t,h,s)):0<l&&0==e&&0==i&&(h=l*(2*Math.PI*s*t),this.R.setValue(h),this.calc_Qs(t,h,s)))}calc_C(t,e){t=1/(t*Math.pow(2*Math.PI*e,2));this.C.setValue(t)}calc(t){try{let t=0,e=0,s=0,i=0,l=0,h=0,a=0;if(this.R.empty()||(e=this.R.getValue(),++t),this.L.empty()||(s=this.L.getValue(),++t),this.C.empty()||(i=this.C.getValue(),++t),this.f.empty()||(l=this.f.getValue(),++t),this.Qs.empty()||(h=this.Qs.getValue(),++t),this.Qp.empty()||(a=this.Qp.getValue(),++t),2!=t&&3!=t)throw"invalid number of parameters";if(0!=s&&0!=i)0==l&&0<(l=1/(2*Math.PI*Math.sqrt(s*i)))&&(this.f.setValue(l),this.calc_Q(s,e,l,h,a));else if(0!=i&&0!=l)s=1/(i*Math.pow(2*Math.PI*l,2)),this.L.setValue(s),this.calc_Q(s,e,l,h,a);else if(0!=s&&0!=l)this.calc_C(s,l),this.calc_Q(s,e,l,h,a);else{if(0<e&&0<l&&0<h)s=h*e/(2*Math.PI*l),this.L.setValue(s),a=1/h,this.Qp.setValue(a);else if(0<e&&0<l&&0<a)s=e/(2*a*Math.PI*l),this.L.setValue(s),h=1/a,this.Qs.setValue(h);else if(0<e&&0<s&&0<h)l=h*e/(2*Math.PI*s),this.f.setValue(l),a=1/h,this.Qp.setValue(a);else{if(!(0<e&&0<s&&0<a))throw"invalid input";l=e/(2*Math.PI*s*a),this.f.setValue(l),h=1/a,this.Qs.setValue(h)}this.calc_C(s,l)}}catch(t){reportError(t)}}}class EE_Sound extends EE_Calc{db=null;V_gain=null;P_gain=null;L_gain=null;constructor(){super("form-sound");this.db=new EE_Calc_Float(this.form_name+"-db",null,!0),this.V_gain=new EE_Calc_Float(this.form_name+"-V"),this.P_gain=new EE_Calc_Float(this.form_name+"-P"),this.L_gain=new EE_Calc_Float(this.form_name+"-L"),this.init()}clear(){this.db.clear(),this.V_gain.clear(),this.P_gain.clear(),this.L_gain.clear()}calc(t){let e=0,s=0,i=0,l=0;try{if(this.db.empty()||(1e3<(e=this.db.getValue())?e=1e3:e<-1e3&&(e=-1e3)),this.V_gain.empty()||(s=this.V_gain.getValue()),this.P_gain.empty()||(i=this.P_gain.getValue()),this.L_gain.empty()||(l=this.L_gain.getValue()),t!=this.form_name+"-db"||this.db.empty()?t==this.form_name+"-V"&&0<s?(i=l=0,this.db.clear()):t==this.form_name+"-P"&&0<i?(s=l=0,this.db.clear()):t==this.form_name+"-L"&&0<l&&(s=i=0,this.db.clear()):s=i=l=0,this.db.empty())if(0<s)e=20*Math.log10(s),i=Math.pow(10,e/10),l=Math.pow(2,e/10);else if(0<i)e=10*Math.log10(i),s=Math.pow(10,e/20),l=Math.pow(2,e/10);else{if(!(0<l))throw"invalid parameters";e=10*Math.log2(l),s=Math.pow(10,e/20),i=Math.pow(10,e/10)}else s=Math.pow(10,e/20),i=Math.pow(10,e/10),l=Math.pow(2,e/10);this.db.setValue(e),this.V_gain.setValue(s),this.P_gain.setValue(i),this.L_gain.setValue(l)}catch(t){reportError(t)}}}class EE_tf extends EE_Calc{t=null;freq=null;constructor(){super("form-tf"),this.t=new EE_Calc_Time(this.form_name+"-t"),this.freq=new EE_Calc_Freq(this.form_name+"-f"),this.init()}clear(){this.freq.clear(),this.t.clear()}calc(t){try{if(!this.freq.empty()&&this.t.empty())this.t.setValue(1/this.freq.getValue());else{if(!this.freq.empty()||this.t.empty())throw"invalid input";this.freq.setValue(1/this.t.getValue())}}catch(t){reportError(t)}}}class EE_tl extends EE_Calc{Zo=null;C=null;L=null;t=null;VF=null;len=null;Zo_default=50;Vc=3*Math.pow(10,8);constructor(){super("form-tl"),this.Zo=new EE_Calc_R(this.form_name+"-Zo"),this.C=new EE_Calc_C(this.form_name+"-C"),this.L=new EE_Calc_L(this.form_name+"-L"),this.VF=new EE_Calc_Float(this.form_name+"-VF"),this.len=new EE_Calc_Len(this.form_name+"-len"),this.t=new EE_Calc_Time(this.form_name+"-t"),this.init()}clear(){this.Zo.setValue(this.Zo_default),this.C.clear(),this.L.clear(),this.t.clear(),this.VF.clear(),this.len.clear()}calc_t_VF(t,e,s){e=Math.sqrt(e*t),this.t.setValue(e*s),t=100/(this.Vc*e);this.VF.setValue(t)}calc(t){let e=0,s=0,i=0,l=0,h=1,a=0;try{this.Zo.empty()||(e=this.Zo.getValue()),this.C.empty()||(i=this.C.getValue()),this.L.empty()||(l=this.L.getValue()),this.t.empty()||(s=this.t.getValue()),this.VF.empty()||(a=this.VF.getValue()),this.len.empty()?(h=1,this.len.setValue(h)):h=this.len.getValue(),0==e&&this.Zo.setValue(e),this.Zo_default=e;var r,_,n=1/(this.Vc*e),o=e/this.Vc;if(0!=i)i<n&&(i=n,this.C.setValue(i)),l=e*e*i,this.L.setValue(l),0==s?this.calc_t_VF(i,l,h):(r=Math.sqrt(l*i),h=s/r,this.len.setValue(h),a=100/(this.Vc*r),this.VF.setValue(a));else if(0!=l)l<o&&(l=o,this.L.setValue(l)),i=l/e/e,this.C.setValue(i),0==s?this.calc_t_VF(i,l,h):(_=Math.sqrt(l*i),h=s/_,this.len.setValue(h),a=100/(this.Vc*_),this.VF.setValue(a));else if(0<a){100<a&&(a=100,this.VF.setValue(a));var u=100/(a*this.Vc);0==s?(s=u*h,this.t.setValue(s)):(h=s/u,this.len.setValue(h)),i=u/e,l=u*e,this.C.setValue(i),this.L.setValue(l)}else{if(!(0<s))throw"invalid parameters";{let t=s/h;t<1/this.Vc&&(t=1/this.Vc,s=t*h),this.t.setValue(s),a=100/(this.Vc*t),this.VF.setValue(a),i=t/e,l=t*e,this.C.setValue(i),this.L.setValue(l)}}}catch(t){reportError(t)}}}class EE_Vdiv extends EE_Calc{Vin=null;Vout=null;R1=null;R2=null;I_R2=null;I_load=null;R_load=null;err=null;constructor(){super("form-vdiv"),this.Vin=new EE_Calc_V(this.form_name+"-Vin"),this.Vout=new EE_Calc_V(this.form_name+"-Vout"),this.R1=new EE_Calc_R(this.form_name+"-R1"),this.R2=new EE_Calc_R(this.form_name+"-R2"),this.R_load=new EE_Calc_R(this.form_name+"-Rl"),this.I_R2=new EE_Calc_I(this.form_name+"-IR2"),this.I_load=new EE_Calc_I(this.form_name+"-Il"),this.err=new EE_Calc_Float(this.form_name+"-err"),this.init()}clear(){this.Vin.clear(),this.Vout.clear(),this.R1.clear(),this.R2.clear(),this.I_R2.clear(),this.R_load.clear(),this.I_load.clear(),this.err.clear()}calc_from_err(t,e,s,i,l){l=1-l/100,t=t/s-1,s=i*(1-l)*(1+t)/(l*t),this.R1.setValue(s*t),this.R2.setValue(s),i=e/s;this.I_R2.setValue(i)}calc(t){try{let t=0,e=0,s=0,i=0,l=0,h=0,a=0,r=0,_=0,n=!1;if(this.Vin.empty()||(t=this.Vin.getValue(),++_),this.Vout.empty()||(e=this.Vout.getValue(),++_),this.R1.empty()||(s=this.R1.getValue(),++_),this.R2.empty()||(i=this.R2.getValue(),++_),this.I_R2.empty()||(l=this.I_R2.getValue(),++_),this.I_load.empty()||(h=this.I_load.getValue(),++_),this.R_load.empty()||(a=this.R_load.getValue(),++_),this.err.empty()||(r=this.err.getValue(),++_),0!=t&&0!=e&&e>=t)throw"invalid input";if(2==_&&0!=s&&0!=i?(t=1,this.Vin.setValue(t)):2==_&&0!=t&&0!=e&&(i=1e3,this.R2.setValue(i)),0==r&&(0!=t&&0!=s&&0!=i?(e=t*i/(s+i),this.Vout.setValue(e),n=!0):0!=e&&0!=s&&0!=i?(t=e*(s+i)/i,this.Vin.setValue(t),n=!0):0!=t&&0!=s&&0!=e?(i=s/(t/e-1),this.R2.setValue(i),n=!0):0!=t&&0!=i&&0!=e&&(s=i*(t/e-1),this.R1.setValue(s),n=!0)),n&&3==_&&(l=e/i,this.I_R2.setValue(l)),3==_&&0!=t&&0!=e&0!=l){t,l;i=e/l,this.R2.setValue(i),s=(t-e)/l,this.R1.setValue(s)}else if(n&&0!=a&&0==h&&0==r){var o=1/(1/i+1/a),u=t/(s+o),c=e;e=t-u*s,this.Vout.setValue(e),r=100*(1-e/c),this.err.setValue(r),h=e/a,this.I_load.setValue(h),l=e/i,this.I_R2.setValue(l)}else if(n&&0==a&&0!=h&&0==r){var m=e;if((a=i*(t-h*s)/(h*(s+i)))<=0)throw"I_load current too high";this.R_load.setValue(a),e=h*a,this.Vout.setValue(e),r=100*(1-e/m),this.err.setValue(r),l=e/i,this.I_R2.setValue(l)}else if(n||0==t||0==e||0==a||0!=h||0==r)if(n||0==t||0==e||0!=a||0==h||0==r){if(!n)throw"invalid input"}else{var f=e;e=f*(1-r/100),this.Vout.setValue(e),a=e/h,this.R_load.setValue(a),this.calc_from_err(t,e,f,a,r)}else{var d=e;e=d*(1-r/100),this.Vout.setValue(e),h=e/a,this.I_load.setValue(h),this.calc_from_err(t,e,d,a,r)}}catch(t){reportError(t)}}}let max_AWG=40,max_wire_d=.1,AWG_old=-1;const ro_cu_25C=1.712e-8;function wire_process_AWG(e,s){if(!e.empty()){let t=e.getValue();t>max_AWG&&(t=max_AWG,e.setValue(t)),t==AWG_old&&!s.empty()||set_d_from_AWG(t,s),AWG_old=t}}function wire_process_d(t,e){try{var s;t.empty()?e.empty()||set_d_from_AWG(e.getValue(),t):((d=t.getValue())>max_wire_d&&(d=max_wire_d,t.setStringValue("100mm")),s=set_AWG_from_d(d,e),AWG_old=s)}catch{e.empty()||set_d_from_AWG(e.getValue(),t)}}function AWG_to_d(t){return Math.pow(Math.E,2.1104-.11594*t)}function set_d_from_AWG(t,e){var t=AWG_to_d(t),s=float_to_string(t,3)+"mm";return e.setStringValue(s),t}function d_to_AWG(t){t=(2.1104-Math.log(1e3*t))/.11594;return Math.round(t)}function set_AWG_from_d(t,e){return 0<=(AWG=d_to_AWG(t))&&AWG<=max_AWG?e.setValue(AWG):(e.clear(),AWG=-1),AWG}class EE_WireRes extends EE_Calc{AWG=null;d=null;len=null;t=null;R=null;constructor(){super("form-wres"),this.AWG=new EE_Calc_Int(this.form_name+"-AWG"),this.d=new EE_Calc_Len(this.form_name+"-d"),this.len=new EE_Calc_Len(this.form_name+"-len"),this.t=new EE_Calc_Float(this.form_name+"-t"),this.R=new EE_Calc_R(this.form_name+"-R"),this.init();let t=document.getElementById(this.form_name+"-AWG");t.onblur=()=>{wire_process_AWG(this.AWG,this.d)},(t=document.getElementById(this.form_name+"-d")).onblur=()=>{wire_process_d(this.d,this.AWG)}}clear(){this.AWG.clear(),this.d.clear(),this.len.clear(),this.t.setValue(25),this.R.clear()}calc(t){let e=-1,s=0,i=0,l=0,h=0,a=ro_cu_25C,r=0;try{if(this.AWG.empty()||(e=this.AWG.getValue())>max_AWG&&(e=max_AWG,this.AWG.setValue(e)),this.d.empty()||(s=this.d.getValue())>max_wire_d&&(s=max_wire_d,this.d.setStringValue("100mm")),this.len.empty()||(i=this.len.getValue()),this.t.empty()||((h=this.t.getValue())<-150?h=-150:250<h&&(h=250),this.t.setValue(h),a=ro_cu_25C*(1+.003987*(h-25))),this.R.empty()||(l=this.R.getValue()),0==s&&-1!=e&&(s=set_d_from_AWG(e,this.d),s/=1e3),0!=s&&(r=Math.PI*s*s/4),0!=s&&0!=i&&0==l&&0!=h)l=a*i/r,this.R.setValue(l);else if(0!=s&&0==i&&0!=l&&0!=h)i=l*r/a,this.len.setValue(i);else if(0==s&&0!=i&&0!=l&&0!=h){r=a*i/l;var _=float_to_string(1e3*(s=Math.sqrt(4*r/Math.PI)),3)+"mm";this.d.setStringValue(_),e=set_AWG_from_d(s,this.AWG)}else{if(0==s||0==i||0==l||0!=h)throw"invalid parameters";if(a=l*r/i,(h=(a/ro_cu_25C-1)/.003987+25)<-150||250<h)throw"invalid range";this.t.setValue(h)}}catch(t){reportError(t)}}}class EE_Vdrop extends EE_Calc{AWG=null;d=null;len=null;t=null;V=null;I=null;constructor(){super("form-vdrop"),this.AWG=new EE_Calc_Int(this.form_name+"-AWG"),this.d=new EE_Calc_Len(this.form_name+"-d"),this.len=new EE_Calc_Len(this.form_name+"-len"),this.t=new EE_Calc_Float(this.form_name+"-t"),this.V=new EE_Calc_V(this.form_name+"-V"),this.I=new EE_Calc_I(this.form_name+"-I"),this.init();let t=document.getElementById(this.form_name+"-AWG");t.onblur=()=>{wire_process_AWG(this.AWG,this.d)},(t=document.getElementById(this.form_name+"-d")).onblur=()=>{wire_process_d(this.d,this.AWG)}}clear(){this.AWG.clear(),this.d.clear(),this.len.clear(),this.t.setValue(25),this.V.clear(),this.I.clear()}calc(t){let e=-1,s=0,i=0,l=0,h=0,a=0,r=ro_cu_25C,_=0,n=0;try{if(this.AWG.empty()||(e=this.AWG.getValue())>max_AWG&&(e=max_AWG,this.AWG.setValue(e)),this.d.empty()||(s=this.d.getValue())>max_wire_d&&(s=max_wire_d,this.d.setStringValue("100mm")),this.len.empty()||(i=this.len.getValue()),this.t.empty()||((a=this.t.getValue())<-150?a=-150:250<a&&(a=250),this.t.setValue(a),r=ro_cu_25C*(1+.003987*(a-25))),this.V.empty()||(l=this.V.getValue()),this.I.empty()||(h=this.I.getValue()),0==s&&-1!=e&&(s=set_d_from_AWG(e,this.d),s/=1e3),0!=s&&(_=Math.PI*s*s/4),0!=s&&0!=i&&0!=h&&0!=a&&0==l)n=r*i/_,l=h*n,this.V.setValue(l);else if(0!=s&&0==i&&0!=h&&0!=a&&0!=l)n=l/h,i=n*_/r,this.len.setValue(i);else if(0==s&&0!=i&&0!=h&&0!=a&&0!=l){n=l/h,_=r*i/n;var o=float_to_string(1e3*(s=Math.sqrt(4*_/Math.PI)))+"mm";this.d.setStringValue(o),set_AWG_from_d(s,this.AWG)}else if(0!=s&&0!=i&&0!=h&&0==a&&0!=l){if(n=l/h,r=n*_/i,(a=(r/ro_cu_25C-1)/.003987+25)<-150||250<a)throw"invalid range";this.t.setValue(a)}else{if(0==s||0==i||0!=h||0==a||0==l)throw"invalid parameters";n=r*i/_,h=l/n,this.I.setValue(h)}}catch(t){reportError(t)}}}class EE_Wpar extends EE_Calc{AWG=null;d=null;AWG_total=null;d_total=null;nWires=null;constructor(){super("form-wpar"),this.AWG=new EE_Calc_Int(this.form_name+"-AWG"),this.d=new EE_Calc_Len(this.form_name+"-d"),this.AWG_total=new EE_Calc_Int(this.form_name+"-total-AWG"),this.d_total=new EE_Calc_Len(this.form_name+"-total-d"),this.nWires=new EE_Calc_Int(this.form_name+"-n"),this.init();let t=document.getElementById(this.form_name+"-AWG");t.onblur=()=>{wire_process_AWG(this.AWG,this.d)},(t=document.getElementById(this.form_name+"-d")).onblur=()=>{wire_process_d(this.d,this.AWG)},(t=document.getElementById(this.form_name+"-total-AWG")).onblur=()=>{wire_process_AWG(this.AWG_total,this.d_total)},(t=document.getElementById(this.form_name+"-total-d")).onblur=()=>{wire_process_d(this.d_total,this.AWG_total)}}clear(){this.AWG.clear(),this.d.clear(),this.AWG_total.clear(),this.d_total.clear(),this.nWires.clear()}nwires_to_combined_AWG(t,e){e=Math.sqrt(4*(e*t)/Math.PI),this.AWG_total.setValue(d_to_AWG(e)),t=float_to_string(1e3*e,3)+"mm";this.d_total.setStringValue(t)}calc(t){try{var h;let t=0;var a;let e=0,s=0,i=0,l=0;if(this.AWG.empty()||this.AWG.getValue()>max_AWG&&(h=max_AWG,this.AWG.setValue(h)),this.d.empty()||((t=this.d.getValue())>max_wire_d&&(t=max_wire_d,this.d.setStringValue("100mm")),i=Math.PI*t*t/4),this.AWG_total.empty()||this.AWG_total.getValue()>max_AWG&&(a=max_AWG,this.AWG_total.setValue(a)),this.d_total.empty()||((e=this.d_total.getValue())>max_wire_d&&(e=max_wire_d,this.d_total.setStringValue("100mm")),l=Math.PI*e*e/4),this.nWires.empty()||(s=this.nWires.getValue()),0!=t&&0!=e&&0==s)s=Math.ceil((l/i).toFixed(1)),this.nWires.setValue(s),this.nwires_to_combined_AWG(s,i);else if(0!=t&&0==e&&0!=s)this.nwires_to_combined_AWG(s,i);else{if(0!=t||0==e||0==s)throw"invalid input";var r=l/s,_=Math.sqrt(4*r/Math.PI),n=(this.AWG.setValue(d_to_AWG(_)),float_to_string(1e3*_,3)+"mm");this.d.setStringValue(n)}}catch(t){reportError(t)}}}class EE_Xc extends EE_Calc{C_field=null;freq_field=null;Z_field=null;constructor(){super("form-Xc"),this.C_field=new EE_Calc_C(this.form_name+"-C"),this.freq_field=new EE_Calc_Freq(this.form_name+"-freq"),this.Z_field=new EE_Calc_R(this.form_name+"-Xc"),this.init()}clear(){this.C_field.clear(),this.freq_field.clear(),this.Z_field.clear()}calc(t){try{let t=0,e=0,s=0,i=0;if(this.C_field.empty()||(t=this.C_field.getValue(),++i),this.freq_field.empty()||(e=this.freq_field.getValue(),++i),this.Z_field.empty()||(s=this.Z_field.getValue(),++i),2!=i)throw"wrong number of parameters";0!=t&&0!=e?(s=1/(2*Math.PI*e*t),this.Z_field.setValue(s)):0!=t&&0!=s?(e=1/(2*Math.PI*s*t),this.freq_field.setValue(e)):(t=1/(2*Math.PI*e*s),this.C_field.setValue(t))}catch(t){reportError(t)}}}class EE_Xl extends EE_Calc{L_field=null;freq_field=null;Z_field=null;constructor(){super("form-Xl"),this.L_field=new EE_Calc_L(this.form_name+"-L"),this.freq_field=new EE_Calc_Freq(this.form_name+"-freq"),this.Z_field=new EE_Calc_R(this.form_name+"-Xl"),this.init()}clear(){this.L_field.clear(),this.freq_field.clear(),this.Z_field.clear()}calc(t){try{let t=0,e=0,s=0,i=0;if(this.L_field.empty()||(t=this.L_field.getValue(),++i),this.freq_field.empty()||(e=this.freq_field.getValue(),++i),this.Z_field.empty()||(s=this.Z_field.getValue(),++i),2!=i)throw"wrong number of parameters";0!=t&&0!=e?(s=2*Math.PI*e*t,this.Z_field.setValue(s)):0!=t&&0!=s?(e=s/(2*Math.PI*t),this.freq_field.setValue(e)):(t=s/(2*Math.PI*e),this.L_field.setValue(t))}catch(t){reportError(t)}}}